{
  "application": "training",

  "pipelines": [
      {
        "application": "training",
        "keepWaitingPipelines": false,
        "name": "terraform-dinghy",
        "limitConcurrent": true,

        "expectedArtifacts": [

                                {
                                  "defaultArtifact": {
                                    "artifactAccount": "gitrepo",
                                    "id": "ba9aeb80-8082-4882-889b-98ec2d010a50",
                                    "metadata": {
                                      "subPath": "/aws_ec2"
                                    },
                                    "reference": "https://github.com/infacloud/terraform-test",
                                    "type": "git/repo"
                                  },
                                  "displayName": "pink-tiger-6",
                                  "id": "terraform-template-id",
                                  "matchArtifact": {
                                    "artifactAccount": "gitrepo",
                                    "id": "de7e77a8-a1be-4793-9571-0893f4dd1664",
                                    "metadata": {
                                      "subPath": "/aws_ec2"
                                    },
                                    "reference": "https://github.com/infacloud/terraform-test",
                                    "type": "git/repo",
                                    "version": ""
                                  },
                                  "useDefaultArtifact": true,
                                  "usePriorArtifact": false
                                }
							                ],

        "stages": [

          {{ module "stage.jenkins.module" 
              "name" "Jenkins"
              "refId" 1
              
              "master" "ctjenkins"
              "job" "pipeline"
                
          }},

          {{ module "stage.terraform.module" 
              "name" "terraform plan"
              "refId" 2	
              "requisiteStageRefIds" ["1"]

              "action" "plan"
              "terraformVersion" "0.12.0"


              "artifacts"     {
                                "account": "gitrepo",
                                "artifact": null,
                                "id": "terraform-template-id"
                              }

              "dir" ""
          }},
         {{ module "stage.wait.module" 
              "name" "waitStage"
              "refId" 3
              "requisiteStageRefIds" ["2"]
              "waitTime" "30"
          }}

        ],
        "triggers": []
      }
   ]
}
